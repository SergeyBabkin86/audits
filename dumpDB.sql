CREATE TABLE AUDIT_REPORTS
(
    ID           INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "NUMBER"     VARCHAR(30)                              NOT NULL UNIQUE,
    STATUS       varchar(30),
    ORGANISATION VARCHAR(255),
    DEPARTMENT   VARCHAR(255),
    LOCATION     VARCHAR(512)                             NOT NULL,
    MANAGER      VARCHAR(255),
    "SCOPE"      VARCHAR(255)                             NOT NULL,
    SCHEDULE     VARCHAR(255),
    "TYPE"       VARCHAR(255),
    FORM         VARCHAR(255),
    SUBJECT      VARCHAR(255)                             NOT NULL,
    CRITERIA     VARCHAR(255),
    START_DATE   DATE,
    END_DATE     DATE                                     NOT NULL,
    AUDITED_BY   VARCHAR(255)                             NOT NULL,
    LEAD_AUDITOR VARCHAR(255)                             NOT NULL,
    AUDITOR      VARCHAR(255) DEFAULT 'Not Applicable',
    EXPERT       VARCHAR(255) DEFAULT 'Not Applicable',
    TRAINEE      VARCHAR(255) DEFAULT 'Not Applicable',
    AUDITEE      VARCHAR(255),
    CONSTRAINT PK_AR PRIMARY KEY (ID)
);

CREATE TABLE FINDINGS
(
    ID               INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    AUDIT_REP_ID     INTEGER                                  NOT NULL,
    ITEM             INTEGER,
    STATUS           VARCHAR(128),
    FINDING_DESC     VARCHAR(1024),
    FINDING_LEVEL    VARCHAR(255),
    REQUIREMENT_EXT  VARCHAR(255),
    REQUIREMENT_LOW  VARCHAR(255),
    DUE_DATE         DATE                                     NOT NULL,
    ROOT_CAUSE_GEN   VARCHAR(255),
    ROOT_CAUSE_DESC  VARCHAR(1024),
    CORR_ACT_PLAN    VARCHAR(1024),
    CORR_ACT_IMPL    VARCHAR(1024),
    PREV_ACT_PLAN    VARCHAR(1024),
    PREV_ACT_IMPL    VARCHAR(1024),
    CLOSURE_DATE     DATE DEFAULT '0001-01-01',
    EXTENSION_DATE   DATE DEFAULT '0001-01-01',
    EXTENSION_REASON VARCHAR(255),
    REMARKS          VARCHAR(1024),
    RESPONSIBLE      VARCHAR(255),
    CO_RESPONSIBLE   VARCHAR(255),
    CONSTRAINT PK_F PRIMARY KEY (ID),
    CONSTRAINT FK_AR FOREIGN KEY (AUDIT_REP_ID) REFERENCES AUDIT_REPORTS (ID) ON DELETE CASCADE
);
